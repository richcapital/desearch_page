(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{7345:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/csv",function(){return r(5231)}])},5231:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return k}});var t=r(7568),i=r(6042),a=r(9396),c=r(9534),o=r(797),s=r(414),u=r(5893),d=r(7294),l=r(4924),h=r(4914),f=r.n(h),m=r(1944),p=r(1876).Buffer,g=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Shift_JIS";return new Promise(function(r,t){var i=new FileReader;i.onerror=function(){return t(i.error)},i.onload=function(){return r(f().decode(p.from(i.result),n))},i.readAsArrayBuffer(e)})},N=function(e){var n=e[0];return e.slice(1).map(function(e){return n.reduce(function(n,r,t){var c=e[t];return(0,a.Z)((0,i.Z)({},n),(0,l.Z)({},r,c&&c.length>0?c:void 0))},{})})},j=function(e){if(e["商品番号"]){var n="業者"==e["買取方法"];return{originalType:"PHX",originalId:e["商品番号"],displayName:e[""],catalogPrice:x(e["定価"]),purchasePrice:n?void 0:x(e["買取価格（税込）"]),salePrice:x(e["通常価格"]),soldPrice:x(e["販売価格（税込）"]),contractPrice:n?x(e["買取価格（税込）"]):void 0,purchasedOn:e["成立日"],soldOn:e["入力日"],url:void 0,keyword:e[""],genreName:e["商品ジャンル"],categoryName:e["アイテム名"],brandName:e["ブランド名"],itemName:e["ブランド名"],rank:e["ランク"],itemTypeName:e["型番"],colorName:e["色"],sizeName:e["サイズ"],materialName:e["素材"],attachmentDescription:e["付属品説明"],description:e["備考"],purchaseShopName:e["買取店舗"],saleShopName:e["販売店舗"],saleMethod:e["販売方法"],purchaseMethod:e["買取方法"],itemStatus:e["商品状態"],metalFittingName:e["金具"],stoneName:e["石"],payload:JSON.stringify(e)}}},v=function(e){if(e.uketsuke_bng)return{originalType:"AUC",originalId:"".concat(e.kaisai_kaisu,"-").concat(e.uketsuke_bng),purchasePrice:void 0,contractPrice:x(e.seri_bng),soldOn:e.kaisai_ymd,url:void 0,genreName:e.genre,categoryName:e.keijo,brandName:e.maker,itemName:e.shohin,rank:e["ランク"],itemTypeName:e["型番"],colorName:void 0,sizeName:void 0,materialName:void 0,attachmentDescription:void 0,description:e.shuppin_biko_1,saleMethod:"業者",itemStatus:e.kekka,metalFittingName:void 0,stoneName:void 0,payload:JSON.stringify(e),imageUrl:"".concat(e.gazo_path).concat(e.jsp_gazo1)}},x=function(e){if(e){var n=parseInt(e.replace(/,/g,""));return n&&n>0?n:void 0}},_=r(6147),k=function(){var e,n,r,l=(0,d.useState)([]),h=l[0],f=l[1],p=(0,d.useState)("PHX"),x=p[0],k=p[1],y=(e=(0,t.Z)(function(e){var n,r,t,c;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(!e.target.files)return[2];return[4,g((0,o.Z)(e.target.files)[0])];case 1:var r,s,u,d;return t=N((d=r=n.sent(),(0,m.Q)(d))),c="PHX"==x?(s=t).map(function(e){return j(e)}).filter(function(e){return!!e}):(u=t).map(function(e){return v(e)}).filter(function(e){return!!e}),f(c.map(function(e){return(0,a.Z)((0,i.Z)({},e),{created:!1})})),[2]}})}),function(n){return e.apply(this,arguments)}),b=(n=(0,t.Z)(function(){return(0,s.__generator)(this,function(e){switch(e.label){case 0:return[4,P(0)];case 1:return e.sent(),[2]}})}),function(){return n.apply(this,arguments)}),P=(r=(0,t.Z)(function(e){var n,r,t,u;return(0,s.__generator)(this,function(s){switch(s.label){case 0:if(r=(n=h[e]).created,t=(0,c.Z)(n,["created"]),r)return[3,2];return[4,_.W.items.create({item:t})];case 1:s.sent(),(u=(0,o.Z)(h))[e]=(0,a.Z)((0,i.Z)({},h[e]),{created:!0}),f(u),s.label=2;case 2:if(!(e<h.length-1))return[3,4];return[4,P(e+1)];case 3:s.sent(),s.label=4;case 4:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{children:"CSVアップロード"}),(0,u.jsx)("p",{children:(0,u.jsx)("input",{type:"file",onChange:y})}),(0,u.jsxs)("p",{children:[(0,u.jsx)("input",{type:"radio",id:"PHX",value:"PHX",onChange:function(){return k("PHX")},checked:"PHX"===x}),(0,u.jsx)("label",{htmlFor:"PHX",children:"PHX"}),(0,u.jsx)("input",{type:"radio",id:"AUC",value:"AUC",onChange:function(){return k("AUC")},checked:"AUC"===x}),(0,u.jsx)("label",{htmlFor:"AUC",children:"AUC"})]}),(0,u.jsx)("button",{onClick:b,children:"アップロード"})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("table",{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"ステータス"}),(0,u.jsx)("th",{children:"商品番号"}),(0,u.jsx)("th",{children:"ジャンル"}),(0,u.jsx)("th",{children:"カテゴリ"}),(0,u.jsx)("th",{children:"ブランド"}),(0,u.jsx)("th",{children:"商品名"})]})}),(0,u.jsx)("tbody",{children:h.map(function(e){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.created?"Created":""}),(0,u.jsxs)("td",{children:[e.originalType,":",e.originalId]}),(0,u.jsx)("td",{children:e.genreName}),(0,u.jsx)("td",{children:e.categoryName}),(0,u.jsx)("td",{children:e.brandName}),(0,u.jsx)("td",{children:e.itemName})]},e.originalId)})})]})})]})})}},5832:function(){}},function(e){e.O(0,[347,774,888,179],function(){return e(e.s=7345)}),_N_E=e.O()}]);